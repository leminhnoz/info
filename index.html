<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Hello world !</title>
<style>
body{
  margin:0;
  padding:0;
  height:100vh;
  overflow:hidden;
  background:#0f1724;
  color:#e6eef8;
  font-family:sans-serif;
  cursor:none;
}

/* Slides */
#slidesWrapper{
  width:200vw;
  height:100vh;
  display:flex;
  transition:transform 1s ease;
}

#slide1, #slide2 {
  width:100vw;
  height:100vh;
  position:relative;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}

/* Canvas */
canvas{
  position:absolute;
  top:0; left:0;
  z-index:0;
}

/* Intro text */
#textContainer{
  position:relative;
  z-index:10;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.line{
  font-size:24px;
  margin:5px 0;
  white-space:pre;
  opacity:0;
  transition: opacity 1s;
}

/* Buttons */
#enterBtn, #sendBtn, #backBtn{
  background:rgba(96,165,250,0.6); /* nháº¡t */
  border:none;
  border-radius:8px;
  cursor:pointer;
  font-weight:bold;
  transition:background 0.3s;
}
#enterBtn:hover, #sendBtn:hover, #backBtn:hover{
  background:rgba(96,165,250,0.85);
}

/* Slide 1 button */
#enterBtn{
  margin-top:25px;
  padding:12px 28px;
  font-size:20px;
  color:#0f1724;
  opacity:0; /* áº©n lÃºc typewriter */
}

/* Slide 2 comment */
#slide2 h1{
  margin-bottom:20px;
  z-index:10;
}
#commentsBox{
  width:70%;
  height:55%;
  background:#0b111b;
  padding:15px;
  border-radius:10px;
  border:2px solid #60a5fa;
  overflow-y:auto;
  z-index:10;
  position:relative;
}
#newComment{
  width:70%;
  padding:10px;
  border-radius:8px;
  border:2px solid #60a5fa;
  background:#0b111b;
  color:white;
  z-index:10;
}
#username{
  width:200px;
  padding:10px;
  margin-top:10px;
  margin-right:10px;
  border-radius:8px;
  border:2px solid #60a5fa;
  background:#0b111b;
  color:white;
  z-index:10;
}
#sendBtn{
  padding:10px 20px;
  margin-top:10px;
  z-index:10;
}

/* Back button */
#backBtn{
  position:absolute;
  top:20px;
  left:20px;
  padding:10px 20px;
  z-index:10;
  opacity:1;
}

/* VIEW ICON */
.viewBox{
  position:absolute;
  top:20px;
  right:20px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  z-index:10;
  font-weight:bold;
}
.viewBox img{
  width:30px;
  margin-right:5px;
}
</style>
</head>
<body>

<div id="slidesWrapper">

  <!-- SLIDE 1 -->
  <div id="slide1">
    <canvas id="canvas"></canvas>
    <div class="viewBox" id="view1Box">
      <img src="https://cdn-icons-png.flaticon.com/128/593/593374.png">
      <span id="view1Count"></span>
    </div>
    <div id="textContainer">
        <div class="line" id="line1"></div>
        <div class="line" id="line2"></div>
        <button id="enterBtn">Comment</button>
    </div>
  </div>

  <!-- SLIDE 2 -->
  <div id="slide2">
    <canvas id="canvas2"></canvas>
    <div class="viewBox" id="view2Box">
      <img src="https://cdn-icons-png.flaticon.com/128/593/593374.png">
      <span id="view2Count"></span>
    </div>
    <button id="backBtn">Back</button>
    <h1>Comments</h1>
    <div id="commentsBox"></div>
    <input id="username" placeholder="Your name...">
    <textarea id="newComment" placeholder="Write a comment..."></textarea>
    <button id="sendBtn">Send</button>
  </div>

</div>

<audio id="keySound" src="https://www.soundjay.com/button/sounds/button-16.mp3"></audio>

<script>
/* =========================================================
   ðŸŽ¯ VIEW COUNTER
========================================================= */
if(!localStorage.getItem("profileViews")){
  localStorage.setItem("profileViews", 1);
}else{
  localStorage.setItem("profileViews",
    parseInt(localStorage.getItem("profileViews")) + 1
  );
}
let views = localStorage.getItem("profileViews");
document.getElementById("view1Count").innerText = views;
document.getElementById("view2Count").innerText = views;

/* =========================================================
   ðŸŽ¯ COMMENT SYSTEM
========================================================= */
function loadComments(){
  let box = document.getElementById("commentsBox");
  box.innerHTML = "";
  let list = JSON.parse(localStorage.getItem("comments") || "[]");
  list.forEach(c => {
    let div = document.createElement("div");
    div.style.marginBottom = "12px";
    div.style.zIndex="10";
    div.innerHTML = `<b>${c.name}</b>: ${c.text}`;
    box.appendChild(div);
  });
}
loadComments();

document.getElementById("sendBtn").onclick = () => {
  let name = document.getElementById("username").value.trim();
  let text = document.getElementById("newComment").value.trim();
  if(!name || !text) return;
  let list = JSON.parse(localStorage.getItem("comments") || "[]");
  list.push({name, text});
  localStorage.setItem("comments", JSON.stringify(list));
  document.getElementById("newComment").value = "";
  loadComments();
};

/* =========================================================
   ðŸŽ¯ BACK BUTTON
========================================================= */
document.getElementById("backBtn").onclick = () => {
  document.getElementById("slidesWrapper").style.transform="translateX(0vw)";
};

/* =========================================================
   ðŸŽ¯ SLIDE SWITCH
========================================================= */
document.getElementById("enterBtn").addEventListener("click", () => {
  document.getElementById("slidesWrapper").style.transform="translateX(-100vw)";
});

/* =========================================================
   ðŸŽ¯ CANVAS ANIMATION + CURSOR TRAIL SOFT + GLOW
========================================================= */
function initCanvas(canvas){
  const ctx = canvas.getContext('2d');
  let cw = canvas.width = window.innerWidth;
  let ch = canvas.height = window.innerHeight;

  const cursor = {x:cw/2, y:ch/2};
  const trailCount = 25;
  const trails = [];
  for(let i=0;i<trailCount;i++) trails.push({x:cursor.x,y:cursor.y});

  const rainLetters=[];

  function spawnLetter(){
    const l={
      x: Math.random()*cw,
      y: -20,
      speed: 1+Math.random()*3,
      char: String.fromCharCode(33+Math.floor(Math.random()*94)),
      fontSize: 10+Math.random()*20,
      opacity: 0.4+Math.random()*0.4
    };
    rainLetters.push(l);
  }
  setInterval(spawnLetter,50);

  document.addEventListener('mousemove', e=>{
    cursor.x=e.clientX;
    cursor.y=e.clientY;
  });

  function animate(){
    ctx.clearRect(0,0,cw,ch);

    // Rain letters
    for(let i=rainLetters.length-1;i>=0;i--){
      const l=rainLetters[i];
      l.y+=l.speed;
      ctx.globalAlpha=l.opacity;
      ctx.font=`${l.fontSize}px monospace`;
      ctx.fillStyle="#60a5fa";
      ctx.fillText(l.char,l.x,l.y);
      if(l.y>ch) rainLetters.splice(i,1);
    }

    // Cursor trail soft
    for(let i=trails.length-1;i>=0;i--){
      const t=trails[i];
      t.x += (i===0?cursor.x:trails[i-1].x-t.x)*0.2;
      t.y += (i===0?cursor.y:trails[i-1].y-t.y)*0.2;
      ctx.strokeStyle=`rgba(96,165,250,${(trailCount-i)/trailCount})`;
      ctx.lineWidth=2;
      ctx.beginPath();
      if(i>0){
        ctx.moveTo(trails[i-1].x,trails[i-1].y);
        ctx.lineTo(t.x,t.y);
        ctx.stroke();
      }
    }

    // Cursor {}
    ctx.fillStyle="rgba(96,165,250,0.9)";
    ctx.font="24px monospace";
    ctx.fillText("{}", cursor.x-8, cursor.y+8);

    requestAnimationFrame(animate);
  }
  animate();

  window.addEventListener('resize', ()=>{
    cw = canvas.width = window.innerWidth;
    ch = canvas.height = window.innerHeight;
  });
}

initCanvas(document.getElementById("canvas"));
initCanvas(document.getElementById("canvas2"));

/* =========================================================
   ðŸŽ¯ TYPEWRITER
========================================================= */
const line1=document.getElementById('line1');
const line2=document.getElementById('line2');
const keySound=document.getElementById('keySound');
const text1="Hi ! My full name is Nguyen Duc Le Minh , and u ?";
const text2Prefix="My age: ";
const TYPE_SPEED=50;

function playKey(){ keySound.currentTime=0; keySound.play().catch(()=>{}); }

async function typeText(element,text){
  element.style.opacity=1;
  for(let i=0;i<=text.length;i++){
    element.textContent=text.slice(0,i);
    playKey();
    await new Promise(r=>setTimeout(r,TYPE_SPEED));
  }
}

async function deleteText(element){
  for(let i=element.textContent.length;i>=0;i--){
    element.textContent=element.textContent.slice(0,i);
    await new Promise(r=>setTimeout(r,TYPE_SPEED/2));
  }
}

// Age counter
const origin=new Date(2011,1,2,0,0,0,0);
function pad(n,len=2){return String(n).padStart(len,'0');}
function computeAgeComponents(start, now){
  let years=0, months=0;
  let cursorDate=new Date(start);
  while(new Date(cursorDate.getFullYear()+1,cursorDate.getMonth(),cursorDate.getDate())<=now){
    cursorDate.setFullYear(cursorDate.getFullYear()+1); years++;
  }
  while(new Date(cursorDate.getFullYear(),cursorDate.getMonth()+1,cursorDate.getDate())<=now){
    cursorDate.setMonth(cursorDate.getMonth()+1); months++;
  }
  let remaining=now-cursorDate;
  const ms=remaining%1000;
  remaining=Math.floor(remaining/1000);
  const seconds=remaining%60;
  remaining=Math.floor(remaining/60);
  const minutes=remaining%60;
  remaining=Math.floor(remaining/60);
  const hours=remaining%24;
  const days=Math.floor((now-new Date(cursorDate.getFullYear(),cursorDate.getMonth(),cursorDate.getDate()))/(24*3600*1000));
  return {years,months,days,hours,minutes,seconds,ms};
}

function formatAge(){
  const now=new Date();
  const c=computeAgeComponents(origin,now);
  return `${c.years}y ${c.months}m ${c.days}d ${c.hours}:${pad(c.minutes)}:${pad(c.seconds)}.${String(c.ms).padStart(3,'0')}`;
}

async function loop(){
  while(true){
    await typeText(line1,text1);
    await typeText(line2,text2Prefix+formatAge());
    enterBtn.style.opacity=1;
    await new Promise(r=>setTimeout(r,5000));
    enterBtn.style.opacity=0;
    await deleteText(line1);
    await deleteText(line2);
    await new Promise(r=>setTimeout(r,1000));
  }
}
loop();
setInterval(()=>{line2.textContent=text2Prefix+formatAge();},50);

</script>
</body>
</html>

